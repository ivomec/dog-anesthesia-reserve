<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통합 마취 대시보드 v4.1 (최적화) - 금호동물병원</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        *,::before,::after { box-sizing: border-box; border-width: 0; border-style: solid; border-color: #e5e7eb }
        ::before,::after { --tw-content: '' }
        html { line-height: 1.5; -webkit-text-size-adjust: 100%; -moz-tab-size: 4; tab-size: 4; font-family: Noto Sans KR, sans-serif; font-feature-settings: normal }
        body { margin: 0; line-height: inherit }
        h1,h2,h3,h4,p,ul,ol,button,label,input { margin: 0; padding: 0 }
        h1,h2,h3,h4 { font-size: inherit; font-weight: inherit }
        a { color: inherit; text-decoration: inherit }
        button,input { font-family: inherit; font-size: 100%; font-weight: inherit; line-height: inherit; color: inherit; margin: 0; padding: 0 }
        button, [type='button'], [type='reset'], [type='submit'] { -webkit-appearance: button; background-color: transparent; background-image: none }
        :-moz-focusring { outline: auto }
        :-moz-ui-invalid { box-shadow: none }
        ul,ol { list-style: none }
        input::placeholder { opacity: 1; color: #9ca3af }
        input[type="checkbox"] { -webkit-appearance: none; -moz-appearance: none; appearance: none; padding: 0; -webkit-print-color-adjust: exact; color-adjust: exact; display: inline-block; vertical-align: middle; background-origin: border-box; -webkit-user-select: none; -moz-user-select: none; user-select: none; flex-shrink: 0; height: 1.25rem; width: 1.25rem; color: #2563eb; background-color: #fff; border-color: #6b7280; border-width: 1px; border-radius: 0.25rem }
        input[type="checkbox"]:focus { outline: 2px solid transparent; outline-offset: 2px; --tw-ring-inset: var(--tw-empty, ); --tw-ring-offset-width: 2px; --tw-ring-offset-color: #fff; --tw-ring-color: #2563eb; --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) }
        input[type="checkbox"]:checked { border-color: transparent; background-color: currentColor; background-size: 100% 100%; background-position: center; background-repeat: no-repeat }
        input[type="checkbox"]:checked { background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e") }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0 }
        .card { --tw-bg-opacity: 1; background-color: rgb(255 255 255 / var(--tw-bg-opacity)); border-radius: 0.75rem; margin-bottom: 1.5rem; --tw-shadow: 0 4px 12px rgba(0,0,0,0.08); --tw-shadow-colored: 0 4px 12px var(--tw-shadow-color); box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow) }
        .input-field { width: 100%; border-radius: 0.5rem; border-width: 1px; border-color: #d1d5db; padding: 0.75rem; text-align: center; font-size: 1.5rem; font-weight: 700 }
        .large-interactive-field { width: 100%; -webkit-appearance: none; -moz-appearance: none; appearance: none; border-radius: 0.5rem; border-width: 1px; border-color: #d1d5db; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding: 0.75rem; text-align: center; font-size: 1.25rem; font-weight: 600 }
        .large-interactive-field[type=number] { -moz-appearance: textfield }
        .step-card { border-left-width: 4px; border-color: #2563eb; --tw-bg-opacity: 1; background-color: rgb(239 246 255 / var(--tw-bg-opacity)) }
        .warning-card { border-left-width: 4px; border-color: #f59e0b; --tw-bg-opacity: 1; background-color: rgb(255 251 235 / var(--tw-bg-opacity)) }
        .emergency-card { border-left-width: 4px; border-color: #ef4444; --tw-bg-opacity: 1; background-color: rgb(254 226 226 / var(--tw-bg-opacity)) }
        .result-value { --tw-text-opacity: 1; color: rgb(30 64 175 / var(--tw-text-opacity)); font-weight: 700 }
        .section-title { --tw-text-opacity: 1; color: rgb(31 41 55 / var(--tw-text-opacity)); border-bottom-width: 2px; border-color: #e5e7eb; margin-bottom: 1rem; padding-bottom: 0.5rem; font-size: 1.5rem; font-weight: 700 }
        .tab-button { border-bottom-width: 3px; border-color: transparent; padding-top: 0.75rem; padding-bottom: 0.75rem; padding-left: 1rem; padding-right: 1rem; font-size: 1rem; font-weight: 600; cursor: pointer; transition-property: all; transition-timing-function: cubic-bezier(.4,0,.2,1); transition-duration: .3s }
        .tab-button.active { --tw-text-opacity: 1; color: rgb(37 99 235 / var(--tw-text-opacity)); border-bottom-color: #2563eb }
        .tab-content { display: none; animation: fadeIn .5s }
        .tab-content.active { display: block }
        .info-box { --tw-bg-opacity: 1; background-color: rgb(249 250 251 / var(--tw-bg-opacity)); border-radius: 0.5rem; border-width: 1px; border-color: #e5e7eb; padding: 0.75rem; font-size: .875rem; --tw-text-opacity: 1; color: rgb(75 85 99 / var(--tw-text-opacity)) }
        .result-box { margin-top: 1.5rem; border-radius: 0.5rem; padding: 1.5rem; text-align: center }
        .result-box-weight { border-left-width: 5px; border-color: #0ea5e9; --tw-bg-opacity: 1; background-color: rgb(224 242 254 / var(--tw-bg-opacity)) }
        .result-box-trachea { border-left-width: 5px; border-color: #22c55e; --tw-bg-opacity: 1; background-color: rgb(220 252 231 / var(--tw-bg-opacity)) }
        .highlight-recommendation { --tw-bg-opacity: 1; background-color: rgb(240 253 244 / var(--tw-bg-opacity)); border-width: 2px; border-color: #22c55e; --tw-scale-x: 1.02; --tw-scale-y: 1.02; transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)) }
        .highlight-renal { border-left-width: 4px; border-color: #3b82f6; --tw-bg-opacity: 1 !important; background-color: rgb(239 246 255 / var(--tw-bg-opacity)) !important }
        .highlight-liver { border-left-width: 4px; border-color: #f97316; --tw-bg-opacity: 1 !important; background-color: rgb(255 247 237 / var(--tw-bg-opacity)) !important }
        @keyframes fadeIn {
            from { opacity: 0 }
            to { opacity: 1 }
        }
        @media print {
            body { -webkit-print-color-adjust: exact; color-adjust: exact; }
            .no-print { display: none; }
            .card, #captureArea, #protocolTab .card { border-width: 0; box-shadow: none; }
            input[type=text], input[type=date], input[type=time] { border-width: 0 !important; background-color: transparent !important; padding: 0.5rem 0 !important; font-size: 1rem; color: #000; }
            #removalInfo { border: 2px solid #facc15 !important; }
        }
        input[type=date]::-webkit-calendar-picker-indicator, input[type=time]::-webkit-calendar-picker-indicator { cursor: pointer; filter: invert(.5) sepia(1) saturate(5) hue-rotate(200deg); }
        body { font-family: Noto Sans KR, sans-serif; --tw-bg-opacity: 1; background-color: rgb(240 244 248 / var(--tw-bg-opacity)); padding: 1.5rem }
        .max-w-7xl { max-width: 80rem }
        .mx-auto { margin-left: auto; margin-right: auto }
        header { margin-bottom: 1.5rem; text-align: center }
        h1 { --tw-text-opacity: 1; color: rgb(31 41 55 / var(--tw-text-opacity)); font-size: 2.25rem; line-height: 2.5rem; font-weight: 700 }
        p { margin-top: 0.5rem; font-size: 1.125rem; line-height: 1.75rem; --tw-text-opacity: 1; color: rgb(75 85 99 / var(--tw-text-opacity)) }
        .gap-3 { gap: .75rem }
        .gap-x-8 { -moz-column-gap: 2rem; column-gap: 2rem }
        .gap-y-6 { row-gap: 1.5rem }
        .gap-2 { gap: .5rem }
        .gap-4 { gap: 1rem }
        .gap-6 { gap: 1.5rem }
        .gap-8 { gap: 2rem }
        .space-x-2>:not([hidden])~:not([hidden]) { --tw-space-x-reverse: 0; margin-right: calc(.5rem * var(--tw-space-x-reverse)); margin-left: calc(.5rem * (1 - var(--tw-space-x-reverse))) }
        .space-y-3>:not([hidden])~:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(.75rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(.75rem * var(--tw-space-y-reverse)) }
        .space-y-4>:not([hidden])~:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(1rem * var(--tw-space-y-reverse)) }
        .space-y-2>:not([hidden])~:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(.5rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(.5rem * var(--tw-space-y-reverse)) }
        .space-y-1>:not([hidden])~:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(.25rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(.25rem * var(--tw-space-y-reverse)) }
        .p-4 { padding: 1rem }
        .p-6 { padding: 1.5rem }
        .p-2 { padding: .5rem }
        .pb-2 { padding-bottom: .5rem }
        .p-3 { padding: .75rem }
        .p-1 { padding: .25rem }
        .pl-8 { padding-left: 2rem }
        .top-6 { top: 1.5rem }
        .p-5 { padding: 1.25rem }
        .p-10 { padding: 2.5rem }
        .px-2 { padding-left: .5rem; padding-right: .5rem }
        .py-2 { padding-top: .5rem; padding-bottom: .5rem }
        .py-3 { padding-top: .75rem; padding-bottom: .75rem }
        .px-3 { padding-left: .75rem; padding-right: .75rem }
        .pt-8 { padding-top: 2rem }
        .pb-4 { padding-bottom: 1rem }
        .pl-3 { padding-left: .75rem }
        .px-4 { padding-left: 1rem; padding-right: 1rem }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem }
        .py-3 { padding-top: .75rem; padding-bottom: .75rem }
        .text-base { font-size: 1rem; line-height: 1.5rem }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem }
        .text-2xl { font-size: 1.5rem; line-height: 2rem }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem }
        .text-5xl { font-size: 3rem; line-height: 1 }
        .text-xs { font-size: .75rem; line-height: 1rem }
        .text-sm { font-size: .875rem; line-height: 1.25rem }
        .font-bold { font-weight: 700 }
        .font-semibold { font-weight: 600 }
        .font-medium { font-weight: 500 }
        .font-extrabold { font-weight: 800 }
        .leading-relaxed { line-height: 1.625 }
        .text-center { text-align: center }
        .text-left { text-align: left }
        .text-right { text-align: right }
        .text-blue-800 { --tw-text-opacity: 1; color: rgb(30 64 175 / var(--tw-text-opacity)) }
        .text-gray-700 { --tw-text-opacity: 1; color: rgb(55 65 81 / var(--tw-text-opacity)) }
        .text-gray-600 { --tw-text-opacity: 1; color: rgb(75 85 99 / var(--tw-text-opacity)) }
        .text-gray-800 { --tw-text-opacity: 1; color: rgb(31 41 55 / var(--tw-text-opacity)) }
        .text-orange-600 { --tw-text-opacity: 1; color: rgb(234 88 12 / var(--tw-text-opacity)) }
        .text-blue-600 { --tw-text-opacity: 1; color: rgb(37 99 235 / var(--tw-text-opacity)) }
        .text-red-600 { --tw-text-opacity: 1; color: rgb(220 38 38 / var(--tw-text-opacity)) }
        .text-white { --tw-text-opacity: 1; color: rgb(255 255 255 / var(--tw-text-opacity)) }
        .text-green-600 { --tw-text-opacity: 1; color: rgb(22 163 74 / var(--tw-text-opacity)) }
        .text-teal-800 { --tw-text-opacity: 1; color: rgb(19 78 74 / var(--tw-text-opacity)) }
        .text-indigo-800 { --tw-text-opacity: 1; color: rgb(55 48 163 / var(--tw-text-opacity)) }
        .text-amber-800 { --tw-text-opacity: 1; color: rgb(146 64 14 / var(--tw-text-opacity)) }
        .text-purple-800 { --tw-text-opacity: 1; color: rgb(107 33 168 / var(--tw-text-opacity)) }
        .text-cyan-800 { --tw-text-opacity: 1; color: rgb(21 94 117 / var(--tw-text-opacity)) }
        .text-red-800 { --tw-text-opacity: 1; color: rgb(153 27 27 / var(--tw-text-opacity)) }
        .text-red-700 { --tw-text-opacity: 1; color: rgb(185 28 28 / var(--tw-text-opacity)) }
        .text-sky-800 { --tw-text-opacity: 1; color: rgb(7 89 133 / var(--tw-text-opacity)) }
        .text-sky-700 { --tw-text-opacity: 1; color: rgb(3 105 161 / var(--tw-text-opacity)) }
        .text-green-800 { --tw-text-opacity: 1; color: rgb(22 101 52 / var(--tw-text-opacity)) }
        .text-yellow-800 { --tw-text-opacity: 1; color: rgb(133 77 14 / var(--tw-text-opacity)) }
        .text-yellow-900 { --tw-text-opacity: 1; color: rgb(113 63 18 / var(--tw-text-opacity)) }
        .text-blue-900 { --tw-text-opacity: 1; color: rgb(30 58 138 / var(--tw-text-opacity)) }
        .text-gray-500 { --tw-text-opacity: 1; color: rgb(107 114 128 / var(--tw-text-opacity)) }
        .text-yellow-400 { --tw-text-opacity: 1; color: rgb(250 204 21 / var(--tw-text-opacity)) }
        .text-black { --tw-text-opacity: 1; color: rgb(0 0 0 / var(--tw-text-opacity)) }
        .text-gray-400 { --tw-text-opacity: 1; color: rgb(156 163 175 / var(--tw-text-opacity)) }
        .underline:hover { text-decoration-line: underline }
        .bg-blue-600 { --tw-bg-opacity: 1; background-color: rgb(37 99 235 / var(--tw-bg-opacity)) }
        .bg-blue-600:hover { --tw-bg-opacity: 1; background-color: rgb(29 78 216 / var(--tw-bg-opacity)) }
        .bg-gray-600 { --tw-bg-opacity: 1; background-color: rgb(75 85 99 / var(--tw-bg-opacity)) }
        .bg-gray-600:hover { --tw-bg-opacity: 1; background-color: rgb(55 65 81 / var(--tw-bg-opacity)) }
        .bg-green-600 { --tw-bg-opacity: 1; background-color: rgb(22 163 74 / var(--tw-bg-opacity)) }
        .bg-green-600:hover { --tw-bg-opacity: 1; background-color: rgb(21 128 61 / var(--tw-bg-opacity)) }
        .bg-gray-50 { --tw-bg-opacity: 1; background-color: rgb(249 250 251 / var(--tw-bg-opacity)) }
        .bg-gray-100 { --tw-bg-opacity: 1; background-color: rgb(243 244 246 / var(--tw-bg-opacity)) }
        .bg-blue-50 { --tw-bg-opacity: 1; background-color: rgb(239 246 255 / var(--tw-bg-opacity)) }
        .bg-teal-50 { --tw-bg-opacity: 1; background-color: rgb(240 253 250 / var(--tw-bg-opacity)) }
        .bg-amber-50 { --tw-bg-opacity: 1; background-color: rgb(255 251 235 / var(--tw-bg-opacity)) }
        .bg-indigo-50 { --tw-bg-opacity: 1; background-color: rgb(238 242 255 / var(--tw-bg-opacity)) }
        .bg-purple-50 { --tw-bg-opacity: 1; background-color: rgb(250 245 255 / var(--tw-bg-opacity)) }
        .bg-cyan-50 { --tw-bg-opacity: 1; background-color: rgb(236 252 255 / var(--tw-bg-opacity)) }
        .bg-red-100 { --tw-bg-opacity: 1; background-color: rgb(254 226 226 / var(--tw-bg-opacity)) }
        .bg-sky-600 { --tw-bg-opacity: 1; background-color: rgb(2 132 199 / var(--tw-bg-opacity)) }
        .bg-sky-600:hover { --tw-bg-opacity: 1; background-color: rgb(3 105 161 / var(--tw-bg-opacity)) }
        .bg-gray-200 { --tw-bg-opacity: 1; background-color: rgb(229 231 235 / var(--tw-bg-opacity)) }
        .bg-white { --tw-bg-opacity: 1; background-color: rgb(255 255 255 / var(--tw-bg-opacity)) }
        .bg-blue-200 { --tw-bg-opacity: 1; background-color: rgb(191 219 254 / var(--tw-bg-opacity)) }
        .bg-red-50 { --tw-bg-opacity: 1; background-color: rgb(254 242 242 / var(--tw-bg-opacity)) }
        .bg-green-50 { --tw-bg-opacity: 1; background-color: rgb(240 253 244 / var(--tw-bg-opacity)) }
        .bg-yellow-100 { --tw-bg-opacity: 1; background-color: rgb(254 252 232 / var(--tw-bg-opacity)) }
        .bg-yellow-400 { --tw-bg-opacity: 1; background-color: rgb(250 204 21 / var(--tw-bg-opacity)) }
        .bg-yellow-400:hover { --tw-bg-opacity: 1; background-color: rgb(245 158 11 / var(--tw-bg-opacity)) }
        .bg-yellow-500 { --tw-bg-opacity: 1; background-color: rgb(234 179 8 / var(--tw-bg-opacity)) }
        .bg-yellow-500:hover { --tw-bg-opacity: 1; background-color: rgb(217 119 6 / var(--tw-bg-opacity)) }
        .bg-yellow-50 { --tw-bg-opacity: 1; background-color: rgb(255 251 235 / var(--tw-bg-opacity)) }
        .border-gray-300 { border-color: #d1d5db }
        .border { border-width: 1px }
        .border-b { border-bottom-width: 1px }
        .border-y { border-top-width: 1px; border-bottom-width: 1px }
        .border-t { border-top-width: 1px }
        .border-l-4 { border-left-width: 4px }
        .rounded-lg { border-radius: .5rem }
        .rounded { border-radius: .25rem }
        .rounded-xl { border-radius: .75rem }
        .rounded-md { border-radius: .375rem }
        .border-gray-200 { border-color: #e5e7eb }
        .border-blue-500 { border-color: #3b82f6 }
        .border-blue-200 { border-color: #bfdbfe }
        .border-green-200 { border-color: #bbf7d0 }
        .border-red-200 { border-color: #fecaca }
        .border-yellow-400 { border-color: #facc15 }
        .border-yellow-300 { border-color: #fde047 }
        .border-yellow-500 { border-color: #eab308 }
        .border-blue-600 { border-color: #2563eb }
        .border-collapse { border-collapse: collapse }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(.4,0,.2,1); transition-duration: .3s }
        .transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(.4,0,.2,1); transition-duration: .3s }
        .duration-300 { transition-duration: .3s }
        .hidden { display: none }
        .w-5 { width: 1.25rem }
        .w-12 { width: 3rem }
        .w-16 { width: 4rem }
        .w-full { width: 100% }
        .h-5 { height: 1.25rem }
        .h-full { height: 100% }
        .flex-grow { flex-grow: 1 }
        .sticky { position: sticky }
        .cursor-pointer { cursor: pointer }
        .flex { display: flex }
        .inline-block { display: inline-block }
        .grid { display: grid }
        .items-center { align-items: center }
        .items-end { align-items: flex-end }
        .items-start { align-items: flex-start }
        .justify-center { justify-content: center }
        .justify-between { justify-content: space-between }
        .justify-around { justify-content: space-around }
        .flex-col { flex-direction: column }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)) }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) }
        .uppercase { text-transform: uppercase }
        .tracking-wider { letter-spacing: .05em }
        .shadow-md\:hover { --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1); --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color); box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow) }
        .focus\:ring-blue-500:focus { --tw-ring-opacity: 1; --tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity)) }
        .focus\:border-blue-500:focus { --tw-border-opacity: 1; border-color: rgb(59 130 246 / var(--tw-border-opacity)) }
        .transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter; transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter; transition-timing-function: cubic-bezier(.4,0,.2,1); transition-duration: .15s }
        .divide-y>:not([hidden])~:not([hidden]) { --tw-divide-y-reverse: 0; border-top-width: calc(1px * calc(1 - var(--tw-divide-y-reverse))); border-bottom-width: calc(1px * var(--tw-divide-y-reverse)); border-color: #e5e7eb }
        .divide-x>:not([hidden])~:not([hidden]) { --tw-divide-x-reverse: 0; border-right-width: calc(1px * var(--tw-divide-x-reverse)); border-left-width: calc(1px * (1 - var(--tw-divide-x-reverse))); border-color: #e5e7eb }
        .mr-2 { margin-right: .5rem }
        .mb-6 { margin-bottom: 1.5rem }
        .mb-4 { margin-bottom: 1rem }
        .mb-2 { margin-bottom: .5rem }
        .mt-3 { margin-top: .75rem }
        .mt-2 { margin-top: .5rem }
        .mt-4 { margin-top: 1rem }
        .mt-6 { margin-top: 1.5rem }
        .mb-8 { margin-bottom: 2rem }
        .mt-8 { margin-top: 2rem }
        .mb-10 { margin-bottom: 2.5rem }
        .mr-3 { margin-right: .75rem }
        .w-24 { width: 6rem }
        .mb-3 { margin-bottom: .75rem }
        .ml-2 { margin-left: .5rem }
        .ml-3 { margin-left: .75rem }
        .mr-1 { margin-right: .25rem }
        .min-h-\[40px\] { min-height: 40px }
        #dischargeTab table, #protocolTab table, #etTubeTab table { width: 100%; border-collapse: collapse; margin-top: 1.25rem; }
        #dischargeTab th, #dischargeTab td, #protocolTab th, #protocolTab td, #etTubeTab th, #etTubeTab td { border: 1px solid #e5e7eb; padding: 0.75rem; text-align: left; vertical-align: middle; font-size: 0.875rem; }
        #dischargeTab th, #protocolTab th, #etTubeTab th { background-color: #f3f4f6; color: #374151; font-weight: 600; text-align: center;}
        #dischargeTab tr:nth-child(even), #protocolTab tr:nth-child(even), #etTubeTab tr:nth-child(even) { background-color: #f9fafb; }
        #dischargeTab .med-table input[type="number"] { width: 80px; padding: 5px; text-align: center; border-radius: 0.25rem; border: 1px solid #d1d5db;}
        #dischargeTab .med-table input[type="checkbox"] { width: 1.25rem; height: 1.25rem; }
        #dischargeTab .highlight-warning { background-color: #fef9c3 !important; }
        #dischargeTab .summary-box { background-color: #eff6ff; border: 1px solid #60a5fa; border-radius: 0.375rem; padding: 1rem; }
        #dischargeTab .summary-item .danger { color: #dc2626; font-weight: bold; }
        #dischargeTab .summary-item .warning { color: #f97316; font-weight: bold; } /* New Gabapentin warning style */
        #dischargeTab caption { font-size: 1.25rem; margin-bottom: 0.5rem; font-weight: bold; color: #1f2937; caption-side: top; text-align: left; padding-bottom: 0.5rem; border-bottom: 2px solid #60a5fa;}
        #dischargeTab .caution { color: #e74c3c; font-weight: bold; }

        @media (min-width: 640px) {
            .sm\:text-lg { font-size: 1.125rem; line-height: 1.75rem }
            .sm\:text-sm { font-size: .875rem; line-height: 1.25rem }
            .sm\:w-auto { width: auto }
            .sm\:flex-row { flex-direction: row }
            .sm\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) }
            .sm\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) }
            .sm\:p-10 { padding: 2.5rem }
        }
        @media (min-width: 768px) {
            body { padding: 1.5rem }
            .md\:text-4xl { font-size: 2.25rem; line-height: 2.5rem }
            .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) }
            .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) }
            .md\:col-span-2 { grid-column: span 2 / span 2 }
            .md\:p-8 { padding: 2rem }
            .md\:text-2xl { font-size: 1.5rem; line-height: 2rem }
            .md\:text-lg { font-size: 1.125rem; line-height: 1.75rem }
        }
        @media (min-width: 1024px) {
            .lg\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) }
            .lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) }
        }
    </style>
</head>
<body class="p-4 md:p-6">

    <div class="max-w-7xl mx-auto" id="dashboard-capture-area">
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">통합 마취 대시보드 v4.1 (최적화)</h1>
            <p class="mt-2 text-lg text-gray-600">금호동물병원 실전 워크플로우 (Anes AI)</p>
        </header>

        <div class="card p-4 no-print">
            <h2 class="section-title text-base mb-4">데이터 관리</h2>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                <button id="save-record-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"><i class="fas fa-save mr-2"></i>기록 저장 (JSON)</button>
                <label for="load-record-input" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center cursor-pointer"><i class="fas fa-folder-open mr-2"></i>기록 불러오기</label>
                <input type="file" id="load-record-input" class="hidden" accept=".json">
                <button id="save-image-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"><i class="fas fa-camera mr-2"></i>이미지로 저장</button>
            </div>
        </div>
        
        <div class="card p-6 md:p-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 items-start">
                <div>
                    <label for="patient_name_main" class="block text-xl font-semibold text-gray-700 mb-2">환자 이름</label>
                    <input type="text" id="patient_name_main" placeholder="환자 이름 입력" class="input-field !text-xl" oninput="calculateAll()">
                </div>
                <div>
                    <label for="surgery_date" class="block text-xl font-semibold text-gray-700 mb-2">수술일</label>
                    <input type="date" id="surgery_date" class="input-field !text-xl">
                </div>
                <div>
                    <label for="weight" class="block text-xl font-semibold text-gray-700 mb-2">환자 체중 (kg)</label>
                    <input type="number" id="weight" placeholder="체중 입력" class="input-field" oninput="calculateAll()">
                </div>
                <div>
                    <label class="block text-xl font-semibold text-gray-700 mb-2">환자 상태 (중복 가능)</label>
                    <div class="grid grid-cols-2 gap-2 mt-3 p-3 bg-gray-50 rounded-lg border">
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" id="status_healthy" value="healthy" class="h-5 w-5" onchange="handleStatusChange(this)" checked> <span class="font-medium">건강한 환자</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" id="status_cardiac" value="cardiac" class="h-5 w-5" onchange="handleStatusChange(this)"> <span class="font-medium text-red-600">심장 이상</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" id="status_liver" value="liver" class="h-5 w-5" onchange="handleStatusChange(this)"> <span class="font-medium text-orange-600">간 이상</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" id="status_renal" value="renal" class="h-5 w-5" onchange="handleStatusChange(this)"> <span class="font-medium text-blue-600">신장 이상</span></label>
                    </div>
                </div>
                <div class="md:col-span-2">
                    <label class="block text-xl font-semibold text-gray-700 mb-2">총 마취 시간</label>
                    <div class="flex items-center justify-between bg-gray-100 p-3 rounded-lg border">
                        <span id="anesthesia-time-display" class="text-3xl font-bold text-gray-800 tracking-wider">00:00:00</span>
                        <div class="flex items-center space-x-2">
                            <button id="timer-start-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded-lg text-sm flex items-center"><i class="fas fa-play mr-1"></i> 시작</button>
                            <button id="timer-pause-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-3 rounded-lg text-sm flex items-center"><i class="fas fa-pause mr-1"></i> 정지</button>
                            <button id="timer-reset-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg text-sm flex items-center"><i class="fas fa-undo mr-1"></i> 초기화</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card p-2 mb-6">
            <div class="flex flex-wrap justify-around border-b border-gray-200">
                <button class="tab-button active" onclick="openTab(event, 'prepTab')"><i class="fas fa-pills mr-2"></i>마취 준비</button>
                <button class="tab-button" onclick="openTab(event, 'emergencyTab')"><i class="fas fa-heart-pulse mr-2"></i>응급상황 대처</button>
                <button class="tab-button" onclick="openTab(event, 'etTubeTab')"><i class="fas fa-ruler-vertical mr-2"></i>ET Tube 계산기</button>
                <button class="tab-button" onclick="openTab(event, 'dischargeTab')"><i class="fas fa-file-prescription mr-2"></i>퇴원약 조제</button>
                <button class="tab-button" onclick="openTab(event, 'protocolTab')"><i class="fas fa-book-medical mr-2"></i>노스판 프로토콜</button>
                <button class="tab-button" onclick="openTab(event, 'educationTab')"><i class="fas fa-user-graduate mr-2"></i>패치 보호자교육</button>
            </div>
        </div>

        <div id="prepTab" class="tab-content active">
            <div class="card p-6 md:p-8">
                <h2 class="section-title">최종 선택 ET Tube</h2>
                <div id="et_tube_selection_display" class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg mb-6 text-center">
                    <p class="text-gray-700">ET Tube가 아직 선택되지 않았습니다. 'ET Tube 계산기' 탭에서 기록해주세요.</p>
                </div>

                <h2 class="section-title">수술 전 약물 준비 (Pre-Anesthetic Drug Prep)</h2>
                <div class="info-box mb-4"><p><strong>목표:</strong> 마취에 필요한 모든 주사 약물과 수액을 미리 정확한 용량으로 준비하여, 마취 과정 중 실수를 방지하고 신속하게 대처합니다.</p></div>
                <div id="pre_op_drugs_result" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-center">...</div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6 md:p-8">
                    <h2 class="section-title">국소마취 (너브 블락) 계산기</h2>
                    <div class="info-box mb-4"><p><strong>목표:</strong> 수술 부위의 통증 신호를 원천적으로 차단하여 호흡마취제 요구량을 줄이고, 수술 후 통증을 최소화합니다.</p></div>
                    <div id="dog_nerve_block_result" class="space-y-4">...</div>
                </div>
                <div class="card p-6 md:p-8">
                    <h2 class="section-title">LK-CRI 계산기</h2>
                    <div class="info-box mb-4"><p><strong>목표:</strong> 리도카인(L)과 케타민(K)을 지속적으로 정맥 주입(CRI)하여, 마취 중 통증 자극을 억제하고 마취를 안정적으로 유지합니다.</p></div>
                    <div id="lk_cri_calc_result" class="space-y-4">...</div>
                </div>
            </div>
            <div class="card p-6 md:p-8">
                <h2 class="section-title">마취 워크플로우</h2>
                <div id="workflow_steps" class="space-y-4">...</div>
            </div>
        </div>

        <div id="emergencyTab" class="tab-content">
            <div class="card p-6 md:p-8">
                <h2 class="section-title text-red-600"><i class="fas fa-triangle-exclamation mr-2"></i>마취 중 문제 해결 (Troubleshooting)</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="emergency-card p-4">
                        <h3 class="font-bold text-lg text-red-800">저혈압 & 서맥</h3>
                        <div id="hypotension_protocol">...</div>
                        <div id="bradycardia_protocol" class="mt-4">...</div>
                    </div>
                    <div class="emergency-card p-4">
                        <h3 class="font-bold text-lg text-red-800">심정지 (CPA) 프로토콜 (RECOVER 기반)</h3>
                        <div id="cpa_protocol">...</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="etTubeTab" class="tab-content">
            <div class="card p-6 md:p-8">
                <h2 class="section-title">최종 선택 ET Tube 기록</h2>
                 <div class="bg-gray-100 p-4 rounded-lg mb-8 border border-gray-300">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <div>
                            <label for="selectedEtTubeSize" class="block text-sm font-bold text-gray-700 mb-1">✔️ 최종 사이즈 (ID)</label>
                            <input type="number" id="selectedEtTubeSize" step="0.5" placeholder="예: 4.5" class="large-interactive-field !text-base">
                        </div>
                        <div class="flex flex-col justify-center">
                             <label for="selectedEtTubeCuff" class="flex items-center cursor-pointer">
                                <input type="checkbox" id="selectedEtTubeCuff" class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 font-semibold text-gray-700">커프(Cuff) 확인 완료</span>
                            </label>
                            <label for="selectedEtTubeNotes" class="block text-sm font-bold text-gray-700 mt-2 mb-1">📝 메모</label>
                            <input type="text" id="selectedEtTubeNotes" placeholder="예: 커프 약간 샘, 조금 더 큰 사이즈 고려" class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <button id="saveEtTubeSelection" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-lg hover:bg-blue-700 transition-colors h-full">
                            <i class="fas fa-save mr-2"></i>기록 저장
                        </button>
                    </div>
                </div>

                <h2 class="section-title">ET Tube 사이즈 통합 계산기</h2>
                <div class="grid md:grid-cols-2 gap-8 mt-6">
                    <div class="flex flex-col gap-8">
                        <div class="bg-gray-50 p-6 rounded-xl border h-full flex flex-col">
                            <h3 class="text-xl font-bold mb-4 text-gray-800">1. 체중으로 계산</h3>
                            <div class="flex flex-col sm:flex-row gap-4">
                                <input type="number" id="weight-input" placeholder="체중(kg) 입력" class="large-interactive-field flex-grow !text-lg !font-bold" step="0.1" oninput="calculateWeightSize()">
                                <button id="calculate-weight-btn" class="w-full sm:w-auto bg-sky-600 text-white font-bold px-6 py-3 rounded-lg text-lg hover:bg-sky-700 transition-colors mt-2 sm:mt-0">수동 확인</button>
                            </div>
                            <div id="result-container-weight" class="hidden mt-4">
                                <div class="result-box result-box-weight">
                                    <p class="text-lg text-sky-800">권장 사이즈</p>
                                    <p id="result-text-weight" class="text-5xl font-extrabold text-sky-700 my-2"></p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-xl border">
                            <h3 class="text-xl font-bold mb-4 text-center text-gray-800">체중별 사이즈 가이드</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-center text-xs sm:text-sm">
                                    <thead>
                                        <tr><th>~1kg</th><th>~2kg</th><th>~3.5kg</th><th>~4kg</th><th>~5kg</th><th>~6kg</th></tr>
                                    </thead>
                                    <tbody class="divide-x divide-gray-200 bg-white">
                                        <tr class="font-bold text-base sm:text-lg"><td>2.0</td><td>2.5</td><td>3.0</td><td>3.5</td><td>4.0</td><td>4.5</td></tr>
                                    </tbody>
                                    <thead>
                                        <tr><th>~7kg</th><th>~8kg</th><th>~9kg</th><th>~12kg</th><th>~14kg</th><th>~40kg</th></tr>
                                    </thead>
                                     <tbody class="divide-x divide-gray-200 bg-white">
                                        <tr class="font-bold text-base sm:text-lg"><td>5.5</td><td>6.0</td><td>6.5</td><td>7.0</td><td>7.5</td><td>9.0</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
    
                    <div class="flex flex-col gap-8">
                        <div class="bg-gray-50 p-6 rounded-xl border h-full flex flex-col">
                            <h3 class="text-xl font-bold mb-4 text-gray-800">2. 기관 직경으로 계산 (T1 X-ray)</h3>
                            <div class="flex flex-col sm:flex-row gap-4">
                                <input type="number" id="trachea-input" placeholder="기관 직경(mm) 입력" class="large-interactive-field flex-grow !text-lg !font-bold" step="0.01">
                                <button id="calculate-trachea-btn" class="w-full sm:w-auto bg-green-600 text-white font-bold px-6 py-3 rounded-lg text-lg hover:bg-green-700 transition-colors mt-2 sm:mt-0">확인</button>
                            </div>
                            <div id="result-container-trachea" class="hidden mt-4">
                                <div class="result-box result-box-trachea">
                                    <p class="text-lg text-green-800">권장 사이즈 (ID)</p>
                                    <p id="result-text-trachea" class="text-5xl font-extrabold text-green-700 my-2"></p>
                                </div>
                            </div>
                        </div>
                         <div class="bg-gray-50 p-6 rounded-xl border">
                            <h3 class="text-xl font-bold mb-4 text-center text-gray-800">기관 직경별 사이즈 가이드</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-center text-sm">
                                    <thead>
                                        <tr><th>기관 직경(mm)</th><th>ET Tube ID</th><th>OD(참고)</th></tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200 bg-white">
                                        <tr><td>5.13</td><td class="font-bold">2.5</td><td>4.1</td></tr>
                                        <tr><td>5.88</td><td class="font-bold">3.0</td><td>4.7</td></tr>
                                        <tr><td>6.63</td><td class="font-bold">3.5</td><td>5.3</td></tr>
                                        <tr><td>7.50</td><td class="font-bold">4.0</td><td>6.0</td></tr>
                                        <tr><td>8.13</td><td class="font-bold">4.5</td><td>6.5</td></tr>
                                        <tr><td>8.38</td><td class="font-bold">5.0</td><td>6.7</td></tr>
                                        <tr><td>9.13</td><td class="font-bold">5.5</td><td>7.3</td></tr>
                                        <tr><td>10.00</td><td class="font-bold">6.0</td><td>8.0</td></tr>
                                        <tr><td>11.38</td><td class="font-bold">6.5</td><td>9.1</td></tr>
                                        <tr><td>11.63</td><td class="font-bold">7.0</td><td>9.3</td></tr>
                                        <tr><td>12.50</td><td class="font-bold">7.5</td><td>10.0</td></tr>
                                        <tr><td>13.38</td><td class="font-bold">8.0</td><td>10.7</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-8 p-4 bg-yellow-100 border border-yellow-300 rounded-lg">
                    <p class="text-yellow-800 font-semibold">※ 이 결과는 일반적인 가이드이며, 실제 적용 시에는 환자의 품종, 체형, 기도 상태 등을 종합적으로 고려해야 합니다.</p>
                </div>
            </div>
        </div>

        <div id="dischargeTab" class="tab-content">
            <div class="card p-6 md:p-8">
                <h2 class="section-title">강아지 퇴원약 조제</h2>
                
                <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6">
                    <h3 class="font-bold text-lg text-blue-800 mb-2">환자 정보 (자동 연동)</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <p><strong>이름:</strong> <span id="discharge_patient_name" class="font-semibold">정보 없음</span></p>
                        <p><strong>체중:</strong> <span id="discharge_patient_weight" class="font-semibold">0</span> kg</p>
                    </div>
                </div>

                <div class="card p-6">
                    <h2 class="section-title">조제 요약</h2>
                    <div id="discharge_summary" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                        <!-- 요약 정보가 여기에 동적으로 생성됩니다. -->
                    </div>
                </div>
                
                <div class="space-y-6 mt-6">
                    <!-- 항생제 -->
                    <table class="med-table">
                        <caption>항생제 (Antibiotics)</caption>
                        <thead>
                            <tr><th>선택</th><th>약물 이름 (함량)</th><th>투약일</th><th>1회 용량 (mg/kg)</th><th>조제 정보</th><th>주의사항 (강아지)</th></tr>
                        </thead>
                        <tbody id="med-list-antibiotics">
                            <tr data-drug="amoxicillin" data-strength="500" data-unit="cap">
                                <td><input type="checkbox" class="med-checkbox"></td><td>아목시실린 (500mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="20" step="0.1"> (20-40)</td><td class="total-amount"></td><td class="notes" data-kidney="true">신장 주의.</td>
                            </tr>
                            <tr data-drug="clindamycin" data-strength="150" data-unit="cap">
                                <td><input type="checkbox" class="med-checkbox"></td><td>클린다마이신 (150mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="11" step="0.1"> (11-22)</td><td class="total-amount"></td><td class="notes">뼈, 치과 감염에 탁월.</td>
                            </tr>
                            <tr data-drug="doxycycline" data-strength="100" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>독시사이클린 (100mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="5" step="0.1"> (5-10)</td><td class="total-amount"></td><td class="notes" data-liver="true" data-kidney="true">간/신장 주의.</td>
                            </tr>
                            <tr data-drug="metronidazole" data-strength="250" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>메트로니다졸 (250mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="15" step="0.1"> (15-30)</td><td class="total-amount"></td><td class="notes" data-liver="true"><span class="caution">간 기능 저하 시 신경독성 위험!</span></td>
                            </tr>
                            <tr data-drug="enrofloxacin" data-strength="50" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>엔로플록사신 (50mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="5" step="0.1"> (5-20)</td><td class="total-amount"></td><td class="notes" data-liver="true" data-kidney="true">간/신장 주의.</td>
                            </tr>
                            <tr data-drug="marbofloxacin" data-strength="20" data-unit="T" data-special="marbofloxacin">
                                <td><input type="checkbox" class="med-checkbox"></td><td>마보플록사신 (20mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="2" step="0.1"> mg/kg (1일 1회)</td><td class="total-amount"></td><td class="notes" data-liver="true" data-kidney="true">간/신장 주의.</td>
                            </tr>
                            <tr data-drug="cefixime" data-strength="100" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>세픽심 (100mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="5" step="0.1"> (5-10)</td><td class="total-amount"></td><td class="notes" data-liver="true" data-kidney="true">간/신장 주의.</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- 진통소염제 -->
                    <table class="med-table">
                         <caption>진통소염제 (Analgesics & Anti-inflammatory)</caption>
                        <thead><tr><th>선택</th><th>약물 이름 (함량)</th><th>투약일</th><th>1회 용량</th><th>조제 정보</th><th>주의사항 (강아지)</th></tr></thead>
                        <tbody id="med-list-analgesics">
                            <tr data-drug="vetrocam" data-special="vetrocam" data-unit="ml">
                                <td><input type="checkbox" class="med-checkbox"></td><td>베트로캄</td><td><input type="number" class="days" value="3" min="1" max="3"></td><td>첫날: 체중*0.2ml<br>이후: 체중*0.1ml</td><td class="total-amount"></td><td class="notes" data-kidney="true"><span class="caution">5일 이상 금기, 신장 이상시 금기</span></td>
                            </tr>
                            <tr data-drug="gabapentin" data-strength="100" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>가바펜틴 (100mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="10" step="1"> (15-30+) mg/kg</td><td class="total-amount"></td><td class="notes" data-kidney="true" data-liver="true"><span class="caution">신부전 시 용량/간격 조절 필수.</span> 간/신장 주의.</td>
                            </tr>
                            <tr data-drug="tramadol" data-strength="50" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>트라마돌 (50mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="4" step="0.1"> (4-10) mg/kg</td><td class="total-amount"></td><td class="notes" data-liver="true" data-kidney="true">효과 논란 많음. 간/신장 주의.</td>
                            </tr>
                            <tr data-drug="acetaminophen" data-strength="500" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>아세트아미노펜 (500mg)</td><td><input type="number" class="days" value="3" min="1"></td><td><input type="number" class="dose" value="16" step="1"> (단기) mg/kg</td><td class="total-amount"></td><td class="notes" data-liver="true"><span class="caution">간독성 위험! 3일 이내 단기 사용만 고려.</span> 식후 투여.</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- 위장약 -->
                    <table class="med-table">
                        <caption>위장약 (Gastrointestinal Protectants)</caption>
                        <thead><tr><th>선택</th><th>약물 이름 (함량)</th><th>투약일</th><th>1회 용량 (mg/kg)</th><th>조제 정보</th><th>주의사항 (강아지)</th></tr></thead>
                        <tbody id="med-list-gi">
                             <tr data-drug="famotidine" data-strength="20" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>파모티딘 (20mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="0.5" step="0.1"> (1-2)</td><td class="total-amount"></td><td class="notes" data-kidney="true">신부전 시 용량 조절 필요.</td>
                            </tr>
                            <tr data-drug="misoprostol" data-strength="200" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>미소프로스톨 (200mcg)</td><td><input type="number" class="days" value="3" min="1"></td><td><input type="number" class="dose" value="3" step="0.1"> (3-5) mcg/kg</td><td class="total-amount"></td><td class="notes"><span class="caution">단위가 mcg임에 반드시 주의!</span></td>
                            </tr>
                            <tr data-drug="almagel" data-strength="500" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>알마겔 (500mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="10" step="1"> (경험적)</td><td class="total-amount"></td><td class="notes" data-kidney="true">다른 약물 흡수 방해. 신부전 시 장기 투여 주의.</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- 간 보조제 -->
                    <table class="med-table">
                        <caption>간 보조제 (Liver Protectants)</caption>
                         <thead><tr><th>선택</th><th>약물 이름 (함량)</th><th>투약일</th><th>1회 용량 (mg/kg)</th><th>조제 정보</th><th>주의사항 (강아지)</th></tr></thead>
                        <tbody id="med-list-liver">
                            <tr data-drug="udca" data-strength="200" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>우루사 (UDCA) (200mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="5" step="0.1"> (10-15 mg/kg/day)</td><td class="total-amount"></td><td class="notes">담즙 정체성 간질환에 핵심적. <strong>식후 투여.</strong></td>
                            </tr>
                            <tr data-drug="silymarin" data-strength="140" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>실리마린 (140mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="10" step="1"> (20-50 mg/kg/day)</td><td class="total-amount"></td><td class="notes">항산화/간세포 보호. 갈아서 투여 가능.</td>
                            </tr>
                            <tr data-drug="same" data-strength="200" data-special="same" data-unit="T">
                                <td><input type="checkbox" class="med-checkbox"></td><td>SAMe (200mg)</td><td><input type="number" class="days" value="7" min="1"></td><td>2.5kg당 1/4정 (1일 1회)</td><td class="total-amount"></td><td class="notes"><span class="caution">장용코팅정. 절대 갈지 말고, 공복에 통째로 투여. 냉동보관, 컷팅해서 처방.</span></td>
                            </tr>
                            <tr data-drug="paramel" data-special="paramel" data-unit="ml">
                                <td><input type="checkbox" class="med-checkbox"></td><td>파라멜(액)</td><td><input type="number" class="days" value="7" min="1"></td><td>0.75 ml/kg</td><td class="total-amount"></td><td class="notes">15g 원액 2배 희석 기준 용량. 간 기능 보조 및 고암모니아혈증 개선.</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- 항진균제 -->
                    <table class="med-table">
                        <caption>항진균제 (Antifungals)</caption>
                        <thead><tr><th>선택</th><th>약물 이름 (함량)</th><th>투약일</th><th>1회 용량 (mg/kg)</th><th>조제 정보</th><th>주의사항 (강아지)</th></tr></thead>
                        <tbody id="med-list-antifungals">
                             <tr data-drug="itraconazole" data-strength="100" data-unit="cap">
                                <td><input type="checkbox" class="med-checkbox"></td><td>이트라코나졸 (100mg)</td><td><input type="number" class="days" value="7" min="1"></td><td><input type="number" class="dose" value="2.5" step="0.1"> (5-10 mg/kg/day)</td><td class="total-amount"></td><td class="notes" data-liver="true">대표적인 <span class="caution">간 독성 유발 약물. 반드시 음식과 함께 투여.</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="protocolTab" class="tab-content">
            <div class="card p-6 md:p-8">
                <!-- 프로토콜 내용이 여기에 삽입됩니다 -->
            </div>
        </div>

        <div id="educationTab" class="tab-content">
             <div class="card p-6 md:p-8">
                <div class="no-print bg-white p-4 rounded-lg shadow-md mb-6 flex flex-col sm:flex-row gap-3 justify-center">
                    <button onclick="saveHandoutAsPDF()" class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center">
                        <i class="fas fa-print mr-2"></i> 🖨️ 인쇄 또는 PDF로 저장
                    </button>
                    <button onclick="saveHandoutAsImage()" class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center">
                        <i class="fas fa-image mr-2"></i> 🖼️ 이미지(PNG)로 저장
                    </button>
                </div>
                <div id="captureArea" class="bg-white rounded-xl shadow-lg p-6 sm:p-10 border border-gray-200">
                    <!-- 보호자 교육 내용이 여기에 삽입됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
